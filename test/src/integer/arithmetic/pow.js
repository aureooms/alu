import test from 'ava' ;
import { parse , stringify , pow } from '../../../../src' ;

function macro ( t , A , B , C ) {
    const a = parse( A ) ;
    const c = pow( a , B ) ;
    t.is( stringify( a ) , A ) ;
    t.is( stringify( c ) , C ) ;
}

macro.title = ( _ , A , B , C ) => `${A} ^ ${B} = ${C}` ;

test( macro , '1' , 1 , '1' ) ;
test( macro , '-1' , 1 , '-1' ) ;
test( macro , '1' , 3 , '1' ) ;
test( macro , '-1' , 3 , '-1' ) ;
test( macro , '1' , 7 , '1' ) ;
test( macro , '-1' , 7 , '-1' ) ;
test( macro , '1' , 9 , '1' ) ;
test( macro , '-1' , 9 , '-1' ) ;
test( macro , '1' , 11 , '1' ) ;
test( macro , '-1' , 11 , '-1' ) ;
test( macro , '1' , 17 , '1' ) ;
test( macro , '-1' , 17 , '-1' ) ;
test( macro , '1' , 22 , '1' ) ;
test( macro , '-1' , 22 , '1' ) ;
test( macro , '1' , 24 , '1' ) ;
test( macro , '-1' , 24 , '1' ) ;
test( macro , '1' , 27 , '1' ) ;
test( macro , '-1' , 27 , '-1' ) ;
test( macro , '1' , 29 , '1' ) ;
test( macro , '-1' , 29 , '-1' ) ;
test( macro , '3' , 1 , '3' ) ;
test( macro , '-3' , 1 , '-3' ) ;
test( macro , '3' , 3 , '27' ) ;
test( macro , '-3' , 3 , '-27' ) ;
test( macro , '3' , 7 , '2187' ) ;
test( macro , '-3' , 7 , '-2187' ) ;
test( macro , '3' , 9 , '19683' ) ;
test( macro , '-3' , 9 , '-19683' ) ;
test( macro , '3' , 11 , '177147' ) ;
test( macro , '-3' , 11 , '-177147' ) ;
test( macro , '3' , 17 , '129140163' ) ;
test( macro , '-3' , 17 , '-129140163' ) ;
test( macro , '3' , 22 , '31381059609' ) ;
test( macro , '-3' , 22 , '31381059609' ) ;
test( macro , '3' , 24 , '282429536481' ) ;
test( macro , '-3' , 24 , '282429536481' ) ;
test( macro , '3' , 27 , '7625597484987' ) ;
test( macro , '-3' , 27 , '-7625597484987' ) ;
test( macro , '3' , 29 , '68630377364883' ) ;
test( macro , '-3' , 29 , '-68630377364883' ) ;
test( macro , '7' , 1 , '7' ) ;
test( macro , '-7' , 1 , '-7' ) ;
test( macro , '7' , 3 , '343' ) ;
test( macro , '-7' , 3 , '-343' ) ;
test( macro , '7' , 7 , '823543' ) ;
test( macro , '-7' , 7 , '-823543' ) ;
test( macro , '7' , 9 , '40353607' ) ;
test( macro , '-7' , 9 , '-40353607' ) ;
test( macro , '7' , 11 , '1977326743' ) ;
test( macro , '-7' , 11 , '-1977326743' ) ;
test( macro , '7' , 17 , '232630513987207' ) ;
test( macro , '-7' , 17 , '-232630513987207' ) ;
test( macro , '7' , 22 , '3909821048582988049' ) ;
test( macro , '-7' , 22 , '3909821048582988049' ) ;
test( macro , '7' , 24 , '191581231380566414401' ) ;
test( macro , '-7' , 24 , '191581231380566414401' ) ;
test( macro , '7' , 27 , '65712362363534280139543' ) ;
test( macro , '-7' , 27 , '-65712362363534280139543' ) ;
test( macro , '7' , 29 , '3219905755813179726837607' ) ;
test( macro , '-7' , 29 , '-3219905755813179726837607' ) ;
test( macro , '9' , 1 , '9' ) ;
test( macro , '-9' , 1 , '-9' ) ;
test( macro , '9' , 3 , '729' ) ;
test( macro , '-9' , 3 , '-729' ) ;
test( macro , '9' , 7 , '4782969' ) ;
test( macro , '-9' , 7 , '-4782969' ) ;
test( macro , '9' , 9 , '387420489' ) ;
test( macro , '-9' , 9 , '-387420489' ) ;
test( macro , '9' , 11 , '31381059609' ) ;
test( macro , '-9' , 11 , '-31381059609' ) ;
test( macro , '9' , 17 , '16677181699666569' ) ;
test( macro , '-9' , 17 , '-16677181699666569' ) ;
test( macro , '9' , 22 , '984770902183611232881' ) ;
test( macro , '-9' , 22 , '984770902183611232881' ) ;
test( macro , '9' , 24 , '79766443076872509863361' ) ;
test( macro , '-9' , 24 , '79766443076872509863361' ) ;
test( macro , '9' , 27 , '58149737003040059690390169' ) ;
test( macro , '-9' , 27 , '-58149737003040059690390169' ) ;
test( macro , '9' , 29 , '4710128697246244834921603689' ) ;
test( macro , '-9' , 29 , '-4710128697246244834921603689' ) ;
test( macro , '11' , 1 , '11' ) ;
test( macro , '-11' , 1 , '-11' ) ;
test( macro , '11' , 3 , '1331' ) ;
test( macro , '-11' , 3 , '-1331' ) ;
test( macro , '11' , 7 , '19487171' ) ;
test( macro , '-11' , 7 , '-19487171' ) ;
test( macro , '11' , 9 , '2357947691' ) ;
test( macro , '-11' , 9 , '-2357947691' ) ;
test( macro , '11' , 11 , '285311670611' ) ;
test( macro , '-11' , 11 , '-285311670611' ) ;
test( macro , '11' , 17 , '505447028499293771' ) ;
test( macro , '-11' , 17 , '-505447028499293771' ) ;
test( macro , '11' , 22 , '81402749386839761113321' ) ;
test( macro , '-11' , 22 , '81402749386839761113321' ) ;
test( macro , '11' , 24 , '9849732675807611094711841' ) ;
test( macro , '-11' , 24 , '9849732675807611094711841' ) ;
test( macro , '11' , 27 , '13109994191499930367061460371' ) ;
test( macro , '-11' , 27 , '-13109994191499930367061460371' ) ;
test( macro , '11' , 29 , '1586309297171491574414436704891' ) ;
test( macro , '-11' , 29 , '-1586309297171491574414436704891' ) ;
test( macro , '17' , 1 , '17' ) ;
test( macro , '-17' , 1 , '-17' ) ;
test( macro , '17' , 3 , '4913' ) ;
test( macro , '-17' , 3 , '-4913' ) ;
test( macro , '17' , 7 , '410338673' ) ;
test( macro , '-17' , 7 , '-410338673' ) ;
test( macro , '17' , 9 , '118587876497' ) ;
test( macro , '-17' , 9 , '-118587876497' ) ;
test( macro , '17' , 11 , '34271896307633' ) ;
test( macro , '-17' , 11 , '-34271896307633' ) ;
test( macro , '17' , 17 , '827240261886336764177' ) ;
test( macro , '-17' , 17 , '-827240261886336764177' ) ;
test( macro , '17' , 22 , '1174562876521148458974062689' ) ;
test( macro , '-17' , 22 , '1174562876521148458974062689' ) ;
test( macro , '17' , 24 , '339448671314611904643504117121' ) ;
test( macro , '-17' , 24 , '339448671314611904643504117121' ) ;
test( macro , '17' , 27 , '1667711322168688287513535727415473' ) ;
test( macro , '-17' , 27 , '-1667711322168688287513535727415473' ) ;
test( macro , '17' , 29 , '481968572106750915091411825223071697' ) ;
test( macro , '-17' , 29 , '-481968572106750915091411825223071697' ) ;
test( macro , '22' , 1 , '22' ) ;
test( macro , '-22' , 1 , '-22' ) ;
test( macro , '22' , 3 , '10648' ) ;
test( macro , '-22' , 3 , '-10648' ) ;
test( macro , '22' , 7 , '2494357888' ) ;
test( macro , '-22' , 7 , '-2494357888' ) ;
test( macro , '22' , 9 , '1207269217792' ) ;
test( macro , '-22' , 9 , '-1207269217792' ) ;
test( macro , '22' , 11 , '584318301411328' ) ;
test( macro , '-22' , 11 , '-584318301411328' ) ;
test( macro , '22' , 17 , '66249952919459433152512' ) ;
test( macro , '-22' , 17 , '-66249952919459433152512' ) ;
test( macro , '22' , 22 , '341427877364219557396646723584' ) ;
test( macro , '-22' , 22 , '341427877364219557396646723584' ) ;
test( macro , '22' , 24 , '165251092644282265779977014214656' ) ;
test( macro , '-22' , 24 , '165251092644282265779977014214656' ) ;
test( macro , '22' , 27 , '1759593634476317566025195247357657088' ) ;
test( macro , '-22' , 27 , '-1759593634476317566025195247357657088' ) ;
test( macro , '22' , 29 , '851643319086537701956194499721106030592' ) ;
test( macro , '-22' , 29 , '-851643319086537701956194499721106030592' ) ;
test( macro , '24' , 1 , '24' ) ;
test( macro , '-24' , 1 , '-24' ) ;
test( macro , '24' , 3 , '13824' ) ;
test( macro , '-24' , 3 , '-13824' ) ;
test( macro , '24' , 7 , '4586471424' ) ;
test( macro , '-24' , 7 , '-4586471424' ) ;
test( macro , '24' , 9 , '2641807540224' ) ;
test( macro , '-24' , 9 , '-2641807540224' ) ;
test( macro , '24' , 11 , '1521681143169024' ) ;
test( macro , '-24' , 11 , '-1521681143169024' ) ;
test( macro , '24' , 17 , '290797794982682557415424' ) ;
test( macro , '-24' , 17 , '-290797794982682557415424' ) ;
test( macro , '24' , 22 , '2315513501476187716057433112576' ) ;
test( macro , '-24' , 22 , '2315513501476187716057433112576' ) ;
test( macro , '24' , 24 , '1333735776850284124449081472843776' ) ;
test( macro , '-24' , 24 , '1333735776850284124449081472843776' ) ;
test( macro , '24' , 27 , '18437563379178327736384102280592359424' ) ;
test( macro , '-24' , 27 , '-18437563379178327736384102280592359424' ) ;
test( macro , '24' , 29 , '10620036506406716776157242913621199028224' ) ;
test( macro , '-24' , 29 , '-10620036506406716776157242913621199028224' ) ;
test( macro , '27' , 1 , '27' ) ;
test( macro , '-27' , 1 , '-27' ) ;
test( macro , '27' , 3 , '19683' ) ;
test( macro , '-27' , 3 , '-19683' ) ;
test( macro , '27' , 7 , '10460353203' ) ;
test( macro , '-27' , 7 , '-10460353203' ) ;
test( macro , '27' , 9 , '7625597484987' ) ;
test( macro , '-27' , 9 , '-7625597484987' ) ;
test( macro , '27' , 11 , '5559060566555523' ) ;
test( macro , '-27' , 11 , '-5559060566555523' ) ;
test( macro , '27' , 17 , '2153693963075557766310747' ) ;
test( macro , '-27' , 17 , '-2153693963075557766310747' ) ;
test( macro , '27' , 22 , '30903154382632612361920641803529' ) ;
test( macro , '-27' , 22 , '30903154382632612361920641803529' ) ;
test( macro , '27' , 24 , '22528399544939174411840147874772641' ) ;
test( macro , '-27' , 24 , '22528399544939174411840147874772641' ) ;
test( macro , '27' , 27 , '443426488243037769948249630619149892803' ) ;
test( macro , '-27' , 27 , '-443426488243037769948249630619149892803' ) ;
test( macro , '27' , 29 , '323257909929174534292273980721360271853387' ) ;
test( macro , '-27' , 29 , '-323257909929174534292273980721360271853387' ) ;
test( macro , '29' , 1 , '29' ) ;
test( macro , '-29' , 1 , '-29' ) ;
test( macro , '29' , 3 , '24389' ) ;
test( macro , '-29' , 3 , '-24389' ) ;
test( macro , '29' , 7 , '17249876309' ) ;
test( macro , '-29' , 7 , '-17249876309' ) ;
test( macro , '29' , 9 , '14507145975869' ) ;
test( macro , '-29' , 9 , '-14507145975869' ) ;
test( macro , '29' , 11 , '12200509765705829' ) ;
test( macro , '-29' , 11 , '-12200509765705829' ) ;
test( macro , '29' , 17 , '7257147736730073114838109' ) ;
test( macro , '-29' , 17 , '-7257147736730073114838109' ) ;
test( macro , '29' , 22 , '148852438543083302439338564577241' ) ;
test( macro , '-29' , 22 , '148852438543083302439338564577241' ) ;
test( macro , '29' , 24 , '125184900814733057351483732809459681' ) ;
test( macro , '-29' , 24 , '125184900814733057351483732809459681' ) ;
test( macro , '29' , 27 , '3053134545970524535745336759489912159909' ) ;
test( macro , '-29' , 27 , '-3053134545970524535745336759489912159909' ) ;
test( macro , '29' , 29 , '2567686153161211134561828214731016126483469' ) ;
test( macro , '-29' , 29 , '-2567686153161211134561828214731016126483469' ) ;
